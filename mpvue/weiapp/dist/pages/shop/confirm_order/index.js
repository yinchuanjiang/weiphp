require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([19],{

/***/ 197:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_mpvue_loader_1_1_2_mpvue_loader_lib_selector_type_script_index_0_node_modules_mpvue_config_loader_0_1_2_mpvue_config_loader_index_js_index_vue__ = __webpack_require__(199);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_mpvue_loader_1_1_2_mpvue_loader_lib_template_compiler_index_id_data_v_a5d44e4c_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_mpvue_loader_1_1_2_mpvue_loader_lib_selector_type_template_index_0_node_modules_mpvue_config_loader_0_1_2_mpvue_config_loader_index_js_index_vue__ = __webpack_require__(266);
var disposed = false
function injectStyle (ssrContext) {
  if (disposed) return
  __webpack_require__(198)
}
var normalizeComponent = __webpack_require__(0)
/* script */

/* template */

/* styles */
var __vue_styles__ = injectStyle
/* scopeId */
var __vue_scopeId__ = "data-v-a5d44e4c"
/* moduleIdentifier (server only) */
var __vue_module_identifier__ = null
var Component = normalizeComponent(
  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_mpvue_loader_1_1_2_mpvue_loader_lib_selector_type_script_index_0_node_modules_mpvue_config_loader_0_1_2_mpvue_config_loader_index_js_index_vue__["a" /* default */],
  __WEBPACK_IMPORTED_MODULE_1__node_modules_mpvue_loader_1_1_2_mpvue_loader_lib_template_compiler_index_id_data_v_a5d44e4c_hasScoped_true_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_mpvue_loader_1_1_2_mpvue_loader_lib_selector_type_template_index_0_node_modules_mpvue_config_loader_0_1_2_mpvue_config_loader_index_js_index_vue__["a" /* default */],
  __vue_styles__,
  __vue_scopeId__,
  __vue_module_identifier__
)
Component.options.__file = "src\\pages\\shop\\confirm_order\\index.vue"
if (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== "default" && key.substr(0, 2) !== "__"})) {console.error("named exports are not supported in *.vue files.")}
if (Component.options.functional) {console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.")}

/* hot reload */
if (false) {(function () {
  var hotAPI = require("vue-loader/node_modules/vue-hot-reload-api")
  hotAPI.install(require("vue"), false)
  if (!hotAPI.compatible) return
  module.hot.accept()
  if (!module.hot.data) {
    hotAPI.createRecord("data-v-a5d44e4c", Component.options)
  } else {
    hotAPI.reload("data-v-a5d44e4c", Component.options)
  }
  module.hot.dispose(function (data) {
    disposed = true
  })
})()}

/* harmony default export */ __webpack_exports__["a"] = (Component.exports);


/***/ }),

/***/ 198:
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),

/***/ 199:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_slicedToArray__ = __webpack_require__(41);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_slicedToArray__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_entries__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_entries___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_entries__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_values__ = __webpack_require__(43);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_values___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_values__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_keys__ = __webpack_require__(44);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_keys__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_json_stringify__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_json_stringify__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__utils__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__static_vant_toast_toast__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_mpvue_wxparse__ = __webpack_require__(88);







//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//



/**
 * 配送类型
 * 1 为邮寄
 * 2 为自提
 * 3 为自提和邮寄混合
 *
 * 多个订单思路：
 * 1. 判断datas.lists 下所有key，都为1或都为2就合并订单
 * 2. key为1和3,或2和3，如果再者选择类型相同则可提交，不相同则提示警告
 * 3. key为1和2两个都不同状态的订单，警告不可以提交
 */

/* harmony default export */ __webpack_exports__["a"] = ({
  mpType: 'page',

  data: function data() {
    return {
      datas: [],
      address: {},
      goodsList: [],
      totalPrice: 0,
      isTcp: true,
      tcp: '',
      activeOrderParams: {},
      isTcpPopup: false,
      isPopup: false,
      couponNum: 0,
      couponName: "",
      couponMoney: 0,
      couponList: [],
      isShopPopup: false,
      isShop: false,
      shopList: [],
      selfShopIdx: -1,
      shopName: "点击选择门店",
      remark: "",
      // 留言
      goodsId: 0,
      //商品id
      storesId: 0,
      // 门店id
      snId: 0,
      // 优惠劵Id
      sendType: 1,
      // 配送类型-
      sendTypeObj: {},
      // 配送商品对象
      isClickShop: 0 //是否已经点击门店列表，获取门店列表信息

    };
  },


  components: {
    wxParse: __WEBPACK_IMPORTED_MODULE_9_mpvue_wxparse__["a" /* default */]
  },
  computed: {
    totalPrices: function totalPrices() {
      console.log(this.goodsList);
      var totalMoeny = 0;

      var _this = this;

      this.goodsList.forEach(function (item, index) {
        totalMoeny = parseFloat(totalMoeny) + parseFloat(item.sale_price) * parseInt(item.num) + parseFloat(item.express);
        _this.sendTypeObj[item.id] = item.type;

        if (item.type == 2) {
          // 选中门店
          console.log('选中门店');
          totalMoeny = (parseFloat(totalMoeny) - parseFloat(item.express)).toFixed(2);
        } else {
          if (item.type != 1) totalMoeny = (parseFloat(totalMoeny) + parseFloat(item.express)).toFixed(2);
        }
      });
      this.totalPrice = totalMoeny;
      return totalMoeny;
    }
  },
  methods: {
    // 查看协议
    openTcpPopup: function openTcpPopup() {
      var _this2 = this;

      this.isTcpPopup = true;
      Object(__WEBPACK_IMPORTED_MODULE_7__utils__["b" /* get */])("shop/api/tcp").then(function (res) {
        _this2.tcp = res.tcp.replace(/\<image/gi, '<image style="width:100%;height:auto" ');
      });
    },


    // 选择优惠卷
    selectCoupon: function selectCoupon(e) {
      var idx = e.currentTarget.dataset.index;
      this.selfIdx = idx;
      this.couponName = "-" + this.couponList[idx].money + "\u5143";
      this.isPopup = !this.isPopup; // 重新计算价格

      this.totalPrice -= parseFloat(this.couponList[idx].money);
      this.couponMoney = parseFloat(this.couponList[idx].money);
      this.snId = this.couponList[idx].sn_id; // 优惠券id
    },


    // 选择门店
    selectShop: function selectShop(e) {
      var idx = e.currentTarget.dataset.index;
      this.selfShopIdx = idx;
      this.shopName = this.shopList[idx].name;
      this.isShopPopup = !this.isShopPopup;
      this.storesId = this.shopList[idx].id; // 门店id
    },


    // 优惠卷弹窗
    togglePopup: function togglePopup() {
      this.isPopup = !this.isPopup;

      var _this = this;

      if (this.isPopup == true) {
        Object(__WEBPACK_IMPORTED_MODULE_7__utils__["f" /* post */])('coupon/api/personal', {
          PHPSESSID: wx.getStorageSync("PHPSESSID"),
          str_coupon_id: _this.datas.str_coupon_id
        }).then(function (res) {
          console.log(res);
          _this.couponList = res.lists[0];
        });
      }
    },


    // 门店弹窗
    toggleShopPopup: function toggleShopPopup() {
      var _this3 = this;

      this.isShopPopup = !this.isShopPopup;
      var id = this.datas.allow_stores;

      if (this.isShopPopup == true) {
        Object(__WEBPACK_IMPORTED_MODULE_7__utils__["f" /* post */])("shop/api/shop_list", {
          PHPSESSID: wx.getStorageSync("PHPSESSID"),
          is_choose: 1,
          ids: id
        }).then(function (res) {
          _this3.isClickShop = 1;
          _this3.shopList = res.store_lists;
        });
      }
    },


    // 切换箭头方向
    toggleArrow: function toggleArrow(e) {
      console.log(e);
      var idx = e.target.dataset.index;
      var lists = JSON.parse(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_json_stringify___default()(this.goodsList));
      var selfDir = lists[idx].arrowDir;

      if (selfDir == "top") {
        lists[idx].arrowDir = "bottom";
      } else {
        lists[idx].arrowDir = "top";
      }

      this.goodsList = lists;
    },
    submitOrder: function submitOrder() {
      var _this = this;

      var address = this.address;
      var type = []; // 填写门店

      this.goodsList.forEach(function (item, idx) {
        // 只要有一个为选中类型为自提
        type.push(item.type);
      }); // 填写地址

      if (type.includes("1")) {
        if (!address.mobile) {
          Object(__WEBPACK_IMPORTED_MODULE_8__static_vant_toast_toast__["a" /* default */])("请填写你的地址");
          return false;
        }
      }

      if (type.includes("2")) {
        if (this.isClickShop == 1 && (!this.shopList || this.shopList.length <= 0)) {
          Object(__WEBPACK_IMPORTED_MODULE_8__static_vant_toast_toast__["a" /* default */])("商品没有共同的门店，请分开下单！");
          return false;
        }

        if (this.storesId == 0) {
          Object(__WEBPACK_IMPORTED_MODULE_8__static_vant_toast_toast__["a" /* default */])("请选择配送门店");
          return false;
        }
      } // 同意协议


      if (!this.isTcp) {
        Object(__WEBPACK_IMPORTED_MODULE_8__static_vant_toast_toast__["a" /* default */])("请同意客户协议");
        return false;
      }

      Object(__WEBPACK_IMPORTED_MODULE_7__utils__["f" /* post */])("shop/api/add_order", {
        address_id: _this.address.id,
        remark: _this.remark,
        // 留言
        sn_id: _this.snId,
        // 优惠卷id
        stores_id: _this.storesId,
        // 门店id
        send_type: _this.sendType,
        //送货类型
        goods_send_type: _this.sendTypeObj,
        //各商品送货类型
        openid: wx.getStorageSync("openid"),
        is_weiapp: 1,
        PHPSESSID: wx.getStorageSync("PHPSESSID")
      }).then(function (res) {
        if (res.code == 0) {
          Object(__WEBPACK_IMPORTED_MODULE_8__static_vant_toast_toast__["a" /* default */])(res.msg);
        } else {
          Object(__WEBPACK_IMPORTED_MODULE_7__utils__["c" /* goPay */])(res.out_trade_no); // 清购物车数量

          var number = _this.goodsId.split(",").length;

          var cartNum = _this.$store.state.cartShopNum;
          var lastNum = parseInt(cartNum) - parseInt(number);

          _this.$store.commit("getCartShopNum", {
            num: lastNum
          });
        }
      });
    },
    toggleRadio: function toggleRadio(e) {
      var lists = JSON.parse(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_json_stringify___default()(this.goodsList));
      var selfChecked = e.mp.detail;
      var idx = e.target.dataset.index;

      if (lists[idx].type != selfChecked) {
        lists[idx].type = selfChecked;
      } // 遍历商品


      var arr = [];
      lists.forEach(function (ele, idx) {
        arr.push(parseInt(ele.type));
      });
      this.sendType = arr.join(","); // 判断是否有选中门点的

      if (arr.includes(2)) {
        this.isShop = true;
      } else {
        this.isShop = false;
      }

      this.goodsList = lists;
    },


    // 商品列表对象转数组
    shopListArr: function shopListArr(obj) {
      var _this = this;

      var data = obj;
      var keys = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_keys___default.a,
          values = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_values___default.a,
          entries = __WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_entries___default.a;

      var arr = [];
      var arr2 = [];

      var _loop = function _loop(key, value) {
        value.forEach(function (item, idx) {
          item.arrowDir = "top"; // 从活动中进来，改变价格

          if (_this.activeOrderParams) {
            var price = JSON.parse(_this.activeOrderParams).activePrice;
            item.sale_price = price;
          }

          if (key != 3) {
            item.type = key;
          } else {
            item.type = 1;
            item.key = 3;
          }

          arr.push(item);
          arr2.push(parseInt(item.type));
        });
      };

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default()(entries(data)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var _ref = _step.value;

          var _ref2 = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_slicedToArray___default()(_ref, 2);

          var key = _ref2[0];
          var value = _ref2[1];

          _loop(key, value);
        } // 判断是否有选中门点的

      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      if (arr2.includes(2)) {
        this.isShop = true;
      } else {
        this.isShop = false;
      }

      this.goodsList = arr;
    },
    sendRequest: function sendRequest(opt) {
      var _this = this;

      Object(__WEBPACK_IMPORTED_MODULE_7__utils__["f" /* post */])("shop/api/confirm_order", opt).then(function (res) {
        console.log('执行了请求'); // 有商品错误

        if (res.code == 0) {
          wx.reLaunch({
            url: "../msg/index?msg=" + res.msg + "&type=warn"
          });
        }

        _this.datas = res;
        _this.address = _this.datas.address;
        _this.couponNum = parseInt(_this.datas.coupon_num);

        _this.shopListArr(_this.datas.lists);
      }).catch(function (err) {
        console.log("错误信息：" + err);
      });
    },
    getData: function getData(type) {
      var _this = this;

      if (type == 1) {
        // 购物车进来的
        this.goodsId = this.$root.$mp.query.goodsIds;
        var opts = {
          goods_ids: this.$root.$mp.query.goodsIds,
          buyCount: this.$root.$mp.query.count,
          cart_ids: this.$root.$mp.query.cartIds,
          PHPSESSID: wx.getStorageSync('PHPSESSID')
        };

        _this.sendRequest(opts);
      } else {
        var id = this.$root.$mp.query.goodsId;
        this.goodsId = id;
        var _opts = {
          goods_id: id,
          PHPSESSID: wx.getStorageSync('PHPSESSID')
        };

        _this.sendRequest(_opts);
      }
    }
  },

  onLoad: function onLoad() {
    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(this, this.$options.data());
    var type = this.$root.$mp.query.type || 0;
    this.activeOrderParams = this.$store.state.activeOrderParams;

    if (this.activeOrderParams) {
      var opt = JSON.parse(this.$store.state.activeOrderParams); // 活动

      this.sendRequest(opt);
    } else {
      this.getData(type);
    }
  },
  onShow: function onShow() {
    // 优惠劵被选择重新计算
    if (this.snId != 0) {
      this.totalPrice -= parseFloat(_this.couponMoney);
    }

    if (wx.getStorageSync("address")) {
      this.address = wx.getStorageSync("address");
    }
  }
});

/***/ }),

/***/ 266:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;
  return (_vm.datas.goods_id || _vm.datas.id) ? _c('div', {
    staticClass: "confirm-order"
  }, [(_vm.address.truename) ? _c('a', {
    staticClass: "m-list order-line",
    attrs: {
      "href": "../add_address/index?type=1"
    }
  }, [_c('div', {
    staticClass: "m-list__l"
  }, [_vm._v(_vm._s(_vm.address.truename))]), _vm._v(" "), _c('div', {
    staticClass: "m-list__c"
  }, [_c('p', {}, [_vm._v(_vm._s(_vm.address.mobile))]), _vm._v(" "), _c('p', {
    staticClass: "f-font-sm"
  }, [_vm._v(_vm._s(_vm.address.address + _vm.address.address_detail))])], 1), _vm._v(" "), _c('div', {
    staticClass: "m-list__r"
  }, [_c('i', {
    staticClass: "iconfont icon-fanhui right"
  })], 1)]) : _c('a', {
    staticClass: "m-list link",
    attrs: {
      "href": "../add_address/index?type=1"
    }
  }, [_c('div', {
    staticClass: "m-list__l"
  }, [_vm._v("添加地址")]), _vm._v(" "), _c('p', {
    staticClass: "m-list__c"
  }), _vm._v(" "), _c('i', {
    staticClass: "iconfont icon-fanhui right"
  })], 1), _vm._v(" "), _vm._l((_vm.goodsList), function(item, index) {
    return _c('div', {
      key: index,
      staticClass: "switch-card"
    }, [_c('div', {
      staticClass: "switch-card__hd"
    }, [_c('p', {
      staticClass: "switch-card__tt"
    }, [(item.key == 3) ? _c('block', [(item.type == 1) ? _c('van-radio-group', {
      staticClass: "switch-card__radio",
      attrs: {
        "value": "1",
        "data-index": index,
        "eventid": '0-' + index,
        "mpcomid": '2-' + index
      },
      on: {
        "change": _vm.toggleRadio
      }
    }, [_c('van-radio', {
      attrs: {
        "name": "1",
        "mpcomid": '0-' + index
      }
    }, [_vm._v("邮寄")]), _vm._v(" "), _c('van-radio', {
      attrs: {
        "name": "2",
        "mpcomid": '1-' + index
      }
    }, [_vm._v("自提")])], 1) : _vm._e(), _vm._v(" "), (item.type == 2) ? _c('van-radio-group', {
      staticClass: "switch-card__radio",
      attrs: {
        "value": "2",
        "data-index": index,
        "eventid": '1-' + index,
        "mpcomid": '5-' + index
      },
      on: {
        "change": _vm.toggleRadio
      }
    }, [_c('van-radio', {
      attrs: {
        "name": "1",
        "mpcomid": '3-' + index
      }
    }, [_vm._v("邮寄")]), _vm._v(" "), _c('van-radio', {
      attrs: {
        "name": "2",
        "mpcomid": '4-' + index
      }
    }, [_vm._v("自提")])], 1) : _vm._e()], 1) : _c('van-radio-group', {
      staticClass: "switch-card__radio",
      attrs: {
        "value": item.type,
        "data-index": index,
        "mpcomid": '8-' + index
      }
    }, [(item.type == 1) ? _c('van-radio', {
      attrs: {
        "name": "1",
        "mpcomid": '6-' + index
      }
    }, [_vm._v("邮寄")]) : _vm._e(), _vm._v(" "), (item.type == 2) ? _c('van-radio', {
      attrs: {
        "name": "2",
        "mpcomid": '7-' + index
      }
    }, [_vm._v("自提")]) : _vm._e()], 1)], 1), _vm._v(" "), _c('i', {
      staticClass: "iconfont icon-fanhui iconfont",
      class: item.arrowDir,
      attrs: {
        "data-index": index,
        "eventid": '2-' + index
      },
      on: {
        "click": _vm.toggleArrow
      }
    })], 1), _vm._v(" "), _c('div', {
      directives: [{
        name: "show",
        rawName: "v-show",
        value: (item.arrowDir == 'top'),
        expression: "item.arrowDir == 'top'"
      }],
      staticClass: "switch-card__bd"
    }, [_c('a', {
      staticClass: "goods-line",
      attrs: {
        "href": '../goods_detail/index?id=' + item.id,
        "open-type": "redirect"
      }
    }, [_c('img', {
      staticClass: "u-goods__img",
      attrs: {
        "lazy-load": "",
        "src": item.cover
      }
    }), _vm._v(" "), _c('div', {
      staticClass: "goods-line__right"
    }, [_c('p', {
      staticClass: "u-goods__tt overflow-dot"
    }, [(_vm.datas.event_type == 1) ? _c('span', {
      staticClass: "s-red"
    }, [_vm._v("【拼团】")]) : (_vm.datas.event_type == 2) ? _c('span', {
      staticClass: "s-red"
    }, [_vm._v("【秒杀】")]) : (_vm.datas.event_type == 3) ? _c('span', {
      staticClass: "s-red"
    }, [_vm._v("【砍价】")]) : _vm._e(), _vm._v("\n            " + _vm._s(item.title))]), _vm._v(" "), _c('div', {
      staticClass: "goods-line__ft"
    }, [_c('div', {
      staticClass: "goods-line__price"
    }, [_c('span', [_vm._v("¥" + _vm._s(item.sale_price))]), _vm._v(" "), _c('span', {
      staticClass: "goods__price-cost f-font-sm"
    }, [_vm._v("¥" + _vm._s(item.market_price))])]), _vm._v(" "), _c('p', {
      staticClass: "f-font-sm"
    }, [_vm._v("x" + _vm._s(item.num))])], 1)], 1)]), _vm._v(" "), _c('div', {
      staticClass: "m-list small"
    }, [_c('p', {
      staticClass: "m-list__c"
    }, [_vm._v("商品金额:")]), _vm._v(" "), _c('p', [_vm._v("¥" + _vm._s(item.sale_price))])], 1), _vm._v(" "), (item.type == 1) ? _c('div', {
      staticClass: "m-list small"
    }, [_c('p', {
      staticClass: "m-list__c"
    }, [_vm._v("邮费:")]), _vm._v(" "), _c('p', [_vm._v("+ ¥" + _vm._s(item.express))])], 1) : _vm._e(), _vm._v(" "), (_vm.couponMoney != 0) ? _c('div', {
      staticClass: "m-list small"
    }, [_c('p', {
      staticClass: "m-list__c"
    }, [_vm._v("优惠券:")]), _vm._v(" "), _c('p', [_vm._v("- ¥" + _vm._s(_vm.couponMoney))])], 1) : _vm._e()])])
  }), _vm._v(" "), (_vm.couponNum > 0) ? _c('div', {
    staticClass: "m-list link",
    attrs: {
      "eventid": '3'
    },
    on: {
      "click": _vm.togglePopup
    }
  }, [_c('div', {
    staticClass: "m-list__l"
  }, [_vm._v("优惠券")]), _vm._v(" "), (_vm.couponName == '') ? _c('p', {
    staticClass: "m-list__c"
  }, [_vm._v("你有" + _vm._s(_vm.couponNum) + "张优惠劵,点击使用")]) : _c('p', {
    staticClass: "m-list__c"
  }, [_vm._v(_vm._s(_vm.couponName))]), _vm._v(" "), _c('i', {
    staticClass: "iconfont icon-fanhui right"
  })], 1) : _vm._e(), _vm._v(" "), (_vm.isShop) ? _c('div', {
    staticClass: "m-list link",
    attrs: {
      "eventid": '4'
    },
    on: {
      "click": _vm.toggleShopPopup
    }
  }, [_c('div', {
    staticClass: "m-list__l"
  }, [_vm._v("选择门店")]), _vm._v(" "), _c('p', {
    staticClass: "m-list__c"
  }, [_vm._v(_vm._s(_vm.shopName))]), _vm._v(" "), _c('i', {
    staticClass: "iconfont icon-fanhui right"
  })], 1) : _vm._e(), _vm._v(" "), _c('div', {
    staticClass: "m-input g-flex"
  }, [_c('span', {
    staticClass: "m-input__lable"
  }, [_vm._v("买家留言:")]), _vm._v(" "), _c('input', {
    directives: [{
      name: "model",
      rawName: "v-model",
      value: (_vm.remark),
      expression: "remark"
    }],
    staticClass: "g-flex__item",
    attrs: {
      "type": "text",
      "placeholder": "点击给卖家留言",
      "eventid": '5'
    },
    domProps: {
      "value": (_vm.remark)
    },
    on: {
      "input": function($event) {
        if ($event.target.composing) { return; }
        _vm.remark = $event.target.value
      }
    }
  })]), _vm._v(" "), _c('div', {
    staticClass: "tcp"
  }, [_c('van-checkbox', {
    staticClass: "square-checkbox",
    attrs: {
      "value": _vm.isTcp,
      "eventid": '6',
      "mpcomid": '9'
    },
    on: {
      "change": function($event) {
        _vm.isTcp = !_vm.isTcp
      }
    }
  }, [_vm._v("我已同意")]), _vm._v(" "), _c('span', {
    staticClass: "s-link",
    attrs: {
      "eventid": '7'
    },
    on: {
      "click": _vm.openTcpPopup
    }
  }, [_vm._v("《客户协议》")])], 1), _vm._v(" "), _c('van-popup', {
    staticClass: "tcpPopup",
    attrs: {
      "show": _vm.isTcpPopup,
      "eventid": '9',
      "mpcomid": '11'
    },
    on: {
      "close": function($event) {
        _vm.isTcpPopup = false
      }
    }
  }, [_c('wxParse', {
    attrs: {
      "content": _vm.tcp,
      "eventid": '8',
      "mpcomid": '10'
    },
    on: {
      "preview": _vm.preview,
      "navigate": _vm.navigate
    }
  })], 1), _vm._v(" "), _c('div', {
    staticClass: "bottom-bar g-flex"
  }, [_c('div', {
    staticClass: "g-flex__item g-flex"
  }, [_c('p', [_vm._v("实付款：")]), _c('p', {
    staticClass: "s-red"
  }, [_vm._v("¥" + _vm._s(_vm.totalPrice))]), _c('p'), _vm._v(" "), _c('p', {
    staticClass: "f-font-sm"
  }, [_vm._v("含运费")])], 1), _vm._v(" "), _c('button', {
    staticClass: "u-button u-button--primary",
    attrs: {
      "eventid": '10'
    },
    on: {
      "click": _vm.submitOrder
    }
  }, [_vm._v("提交订单")])], 1), _vm._v(" "), _c('van-toast', {
    attrs: {
      "id": "van-toast",
      "mpcomid": '12'
    }
  }), _vm._v(" "), _c('van-popup', {
    attrs: {
      "show": _vm.isPopup,
      "position": "bottom",
      "eventid": '12',
      "mpcomid": '13'
    },
    on: {
      "close": _vm.togglePopup
    }
  }, [_c('div', {
    staticClass: "coupon"
  }, [_c('div', {
    staticClass: "coupon-not"
  }, _vm._l((_vm.couponList), function(coupon, index) {
    return _c('div', {
      key: index,
      staticClass: "coupon-item",
      attrs: {
        "data-index": index,
        "eventid": '11-' + index
      },
      on: {
        "click": _vm.selectCoupon
      }
    }, [_c('div', {
      staticClass: "coupon-item__l"
    }, [_c('span', {
      staticClass: "coupon-item__price"
    }, [_vm._v(_vm._s(coupon.money))]), _vm._v(" "), _c('span', {
      staticClass: "f-font-sm"
    }, [_vm._v("元")])]), _vm._v(" "), _c('div', {
      staticClass: "coupon-item__c"
    }, [_c('p', [_vm._v(_vm._s(coupon.title))]), _vm._v(" "), _c('p', {
      staticClass: "coupon-item__time"
    }, [_vm._v(_vm._s(coupon.start_time) + "-" + _vm._s(coupon.end_time))])], 1), _vm._v(" "), _c('div', {
      staticClass: "coupon-item__r"
    }, [_c('button', {
      staticClass: "coupon-item__btn"
    }, [_vm._v("使用")])], 1)])
  }))])]), _vm._v(" "), _c('van-popup', {
    attrs: {
      "show": _vm.isShopPopup,
      "position": "bottom",
      "eventid": '15',
      "mpcomid": '18'
    },
    on: {
      "close": _vm.toggleShopPopup
    }
  }, [_c('van-radio-group', {
    attrs: {
      "value": _vm.selfShopIdx,
      "eventid": '14',
      "mpcomid": '17'
    },
    on: {
      "change": _vm.selectShop
    }
  }, [_c('van-cell-group', {
    attrs: {
      "mpcomid": '16'
    }
  }, _vm._l((_vm.shopList), function(shop, shopIdx) {
    return _c('van-cell', {
      key: shopIdx,
      attrs: {
        "title": shop.name,
        "clickable": "",
        "data-index": shopIdx,
        "eventid": '13-' + shopIdx,
        "mpcomid": '15-' + shopIdx
      },
      on: {
        "click": _vm.selectShop
      }
    }, [_c('van-radio', {
      attrs: {
        "name": shopIdx,
        "mpcomid": '14-' + shopIdx
      }
    })], 1)
  }))], 1)], 1)], 2) : _vm._e()
}
var staticRenderFns = []
render._withStripped = true
var esExports = { render: render, staticRenderFns: staticRenderFns }
/* harmony default export */ __webpack_exports__["a"] = (esExports);
if (false) {
  module.hot.accept()
  if (module.hot.data) {
     require("vue-loader/node_modules/vue-hot-reload-api").rerender("data-v-a5d44e4c", esExports)
  }
}

/***/ })

},[324]);