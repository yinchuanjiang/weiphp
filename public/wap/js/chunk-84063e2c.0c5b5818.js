(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84063e2c"],{"10d9":function(t,s,e){},3999:function(t,s,e){"use strict";var i=e("7848"),a=e("41e6"),c=e("48e1"),o=e("31e8"),n=e("3888"),r=Object.assign;t.exports=!r||e("3f16")(function(){var t={},s={},e=Symbol(),i="abcdefghijklmnopqrst";return t[e]=7,i.split("").forEach(function(t){s[t]=t}),7!=r({},t)[e]||Object.keys(r({},s)).join("")!=i})?function(t,s){var e=o(t),r=arguments.length,l=1,h=a.f,u=c.f;while(r>l){var d,f=n(arguments[l++]),g=h?i(f).concat(h(f)):i(f),m=g.length,p=0;while(m>p)u.call(f,d=g[p++])&&(e[d]=f[d])}return e}:r},"3f87":function(t,s,e){for(var i=e("ff66"),a=e("7848"),c=e("f57d"),o=e("c8da"),n=e("a0dc"),r=e("c3d9"),l=e("20a7"),h=l("iterator"),u=l("toStringTag"),d=r.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=a(f),m=0;m<g.length;m++){var p,v=g[m],C=f[v],_=o[v],k=_&&_.prototype;if(k&&(k[h]||n(k,h,d),k[u]||n(k,u,v),r[v]=d,C))for(p in i)k[p]||c(k,p,i[p],!0)}},"41e6":function(t,s){s.f=Object.getOwnPropertySymbols},"7e96":function(t,s,e){var i=e("a345");i(i.S+i.F,"Object",{assign:e("3999")})},"87cb":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"cart"},[t.datas.wpid?i("scroller",[t.carts.length?[i("i",{staticClass:"iconfont icon-shanchu",on:{click:t.delGoods}}),i("div",{staticClass:"cart-goods"},t._l(t.carts,function(s,e){return i("div",{key:s.id,staticClass:"cart-goods__item g-flex"},[i("div",{staticClass:"cart-goods_checkbox",on:{click:function(s){t.singleChecked(e)}}},[i("van-icon",{directives:[{name:"show",rawName:"v-show",value:!s.isCheck,expression:"!item.isCheck"}],attrs:{name:"circle"}}),i("van-icon",{directives:[{name:"show",rawName:"v-show",value:s.isCheck,expression:"item.isCheck"}],attrs:{name:"checked"}})],1),i("img",{staticClass:"cart-goods__img u-goods__img",attrs:{src:s.goods.cover}}),i("div",{staticClass:"cart-goods__info"},[i("p",{staticClass:"u-goods__tt overflow-dot"},[t._v(t._s(s.goods_name))]),i("div",{staticClass:"g-flex cart-goods__ft"},[i("div",{staticClass:"cart-goods__price"},[t._v("¥ "+t._s(s.price))]),i("div",{staticClass:"cart-goods__count"},[i("van-stepper",{attrs:{"data-index":e},model:{value:s.num,callback:function(e){t.$set(s,"num",e)},expression:"item.num"}})],1)])])])}),0)]:[i("div",{staticClass:"hint-page"},[i("img",{attrs:{src:e("fa95"),alt:""}}),i("p",{staticClass:"hwint-page__text"},[t._v("购物车空空如也")]),i("router-link",{staticClass:"u-button u-button--primary",attrs:{to:"/"}},[t._v("随便逛逛")])],1)]],2):t._e(),t.datas.wpid?i("div",{staticClass:"closing-bar"},[i("div",{staticClass:"closing-bar__checkbox",on:{click:t.toggleAllCheck}},[i("van-icon",{directives:[{name:"show",rawName:"v-show",value:!t.isCheckAll,expression:"!isCheckAll"}],attrs:{name:"circle"}}),i("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isCheckAll,expression:"isCheckAll"}],attrs:{name:"checked"}}),t._v("全选\n    ")],1),i("div",{staticClass:"closing-bar__info"},[i("p",{staticClass:"closing-bar__price"},[t._v("\n        总计(不含运费):\n        "),i("span",{staticClass:"s-red"},[t._v("¥"+t._s(t.totalPrice))])]),i("p",{staticClass:"s-gray"},[t._v("运费¥"+t._s(t.freight))])]),i("button",{staticClass:"closing-bar__btn",on:{click:t.goPay}},[t._v("去结算("+t._s(t.totalCount)+")")])]):t._e(),i("tabbar",{attrs:{checkedIndex:3}})],1)},a=[],c=(e("c839"),e("7e96"),e("0be8"),e("3f87"),e("ff66"),e("ea23"),e("dbff"),e("ed08")),o=e("fade"),n=e("26fc"),r={components:{tabbar:n["a"]},data:function(){return{datas:[],carts:[],totalPrices:0,totalCount:0,isCheckAll:!1,freight:0}},computed:{totalPrice:function(){var t=0,s=0,e=0;return this.carts.forEach(function(i,a){1==i.isCheck&&(t+=parseFloat((i.price*i.num).toFixed(2)),s++,e+=parseFloat(i.goods.express))}),this.totalCount=s,this.freight=parseFloat(e).toFixed(2),t}},methods:{toggleAllCheck:function(){console.log("我触发了");var t=this;this.isCheckAll=!this.isCheckAll,this.carts.forEach(function(s,e){s.isCheck=t.isCheckAll})},singleChecked:function(t){console.log(t);var s=0;this.carts[t].isCheck=!this.carts[t].isCheck,this.carts.forEach(function(t,e){t.isCheck&&s++}),this.isCheckAll=this.carts.length==s},goPay:function(){var t=[],s=[],e={};this.carts.forEach(function(i,a){1==i.isCheck&&(t.push(i.goods_id),s.push(i.id),e[i.goods_id]=i.num)}),t=t.join(","),s=s.join(","),""==t?Object(o["d"])("请选择购买的商品"):this.$router.push({name:"confirm_order",params:{type:1,goodsId:t,cartIds:s,count:e}})},delGoods:function(){for(var t=this,s=this.carts,e=[],i=[],a=0;a<s.length;a++)s[a].isCheck?e.push(s[a].id):i.push(s[a]);e=e.join(),""==e?Object(o["d"])("请选择要删除的购物车物品"):o["a"].confirm({title:"提示",message:"确认删除？"}).then(function(){Object(c["h"])("shop/api/delCart",{ids:e,PHPSESSID:window.localStorage.getItem("PHPSESSID")}).then(function(s){t.carts=i});var s=e.split(",").length,a=t.$store.state.cartShopNum,o=a-s;t.$store.commit("getCartShopNum",{num:o})}).catch(function(){})},getData:function(){var t=this,s=this;Object(c["h"])("shop/api/cart/",{PHPSESSID:window.localStorage.getItem("PHPSESSID")}).then(function(e){e.lists.forEach(function(t,s){t.isCheck=!1}),t.datas=e,t.carts=e.lists;var i=e.lists.length;console.log(i,e),t.isCheckAll=!1,s.$store.commit("getCartShopNum",{num:i})}).catch(function(t){console.log("失败："+t)})}},activated:function(){this.$route.meta.isBack&&(Object.assign(this.$data,this.$options.data()),this.getData()),this.$route.meta.isBack=!1},beforeRouteEnter:function(t,s,e){console.log("从".concat(s.name,"到").concat(t.name)),"goods_detail"==s.name&&(t.meta.isBack=!0),e()},mounted:function(){console.log("只加载一次购物车"),this.getData()}},l=r,h=(e("f32a"),e("048f")),u=Object(h["a"])(l,i,a,!1,null,"7d918151",null);u.options.__file="index.vue";s["default"]=u.exports},f32a:function(t,s,e){"use strict";var i=e("10d9"),a=e.n(i);a.a},fa95:function(t,s,e){t.exports=e.p+"img/null.17d21c9e.png"}}]);
//# sourceMappingURL=chunk-84063e2c.0c5b5818.js.map