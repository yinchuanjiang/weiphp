{"version":3,"sources":["webpack:///./src/pages/coupon/get/index.vue?05b8","webpack:///src/pages/coupon/get/index.vue","webpack:///./src/pages/coupon/get/index.vue?9057","webpack:///./src/pages/coupon/get/index.vue","webpack:///./src/pages/coupon/get/index.vue?6443"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","text","data","info","src","background_img","_e","_v","_s","money","title","startTime","endTime","domProps","innerHTML","use_tips","on","click","getCoupon","staticRenderFns","getvue_type_script_lang_js_","computed","Object","utils","use_start_time","components","navbar","methods","_this","apiUrl","jumpURL","split","window","localStorage","getItem","then","res","code","es","error","success","url","$router","push","name","params","str","created","_this2","id","$route","console","log","PHPSESSID","coupon_getvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_0_4_5_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_3e10c655_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_0_4_5_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_1_2_5_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_3e10c655_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-86596768.f1fdee1d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"coupon-get\"},[_c('navbar',{attrs:{\"text\":\"领取优惠卷\"}}),(_vm.data.info.id)?_c('scroller',[(_vm.info)?_c('div',{staticClass:\"coupon-not\"},[(_vm.info.background_img)?_c('img',{staticClass:\"coupon-img\",attrs:{\"src\":_vm.info.background_img}}):_vm._e(),_c('div',{staticClass:\"coupon-item\"},[_c('div',{staticClass:\"coupon-item__l\"},[_c('span',{staticClass:\"coupon-item__price\"},[_vm._v(_vm._s(_vm.info.money))]),_c('span',{staticClass:\"f-font-sm\"},[_vm._v(\"元\")])]),_c('div',{staticClass:\"coupon-item__c\"},[_c('p',[_vm._v(_vm._s(_vm.info.title))]),_c('p',{staticClass:\"coupon-item__time\"},[_vm._v(_vm._s(_vm.startTime)+\"-\"+_vm._s(_vm.endTime))])])])]):_vm._e(),(_vm.info)?_c('div',{staticClass:\"page-block\"},[_c('h4',{staticClass:\"page-tt\"},[_vm._v(\"优惠券使用说明\")]),(_vm.info)?_c('div',{staticClass:\"page-content\",domProps:{\"innerHTML\":_vm._s(_vm.info.use_tips)}}):_vm._e()]):_vm._e()]):_vm._e(),(_vm.info)?_c('div',{staticClass:\"u-button__bar\"},[_c('button',{staticClass:\"u-button u-button--square\",on:{\"click\":_vm.getCoupon}},[_vm._v(\"立即领取\")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"coupon-get\">\n    <navbar text=\"领取优惠卷\"></navbar>\n    <scroller v-if=\"data.info.id\">\n    <div class=\"coupon-not\" v-if=\"info\" v-cloak>\n      <!-- 优惠卷图片 -->\n      <img v-if=\"info.background_img\" class=\"coupon-img\" :src=\"info.background_img\">\n\n      <div class=\"coupon-item\">\n        <!-- 金额 -->\n        <div class=\"coupon-item__l\">\n          <span class=\"coupon-item__price\">{{info.money}}</span>\n          <span class=\"f-font-sm\">元</span>\n        </div>\n\n        <!-- 满减 -->\n        <div class=\"coupon-item__c\">\n          <p>{{info.title}}</p>\n          <p class=\"coupon-item__time\">{{startTime}}-{{endTime}}</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- 使用说明 -->\n    <div class=\"page-block\" v-if=\"info\">\n      <h4 class=\"page-tt\">优惠券使用说明</h4>\n      <div class=\"page-content\" v-if=\"info\" v-html=\"info.use_tips\"></div>\n    </div>\n    </scroller>\n\n    <div class=\"u-button__bar\" v-if=\"info\">\n      <button class=\"u-button u-button--square\" @click=\"getCoupon\">立即领取</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { post, get, timeChange } from \"@/utils\";\nimport navbar from \"@/components/navbar\";\nimport { Toast } from \"vant\";\nexport default {\n  data() {\n    return {\n      data: [],\n      info: []\n    };\n  },\n  computed: {\n    startTime() {\n      return timeChange(this.info.use_start_time, true);\n    },\n    endTime() {\n      return timeChange(this.info.use_start_time, true);\n    }\n  },\n\n  components: {\n    navbar\n  },\n\n  methods: {\n    getCoupon() {\n      // 解析跳转的url，set_sn_code\n      let apiUrl =\n        this.data.jumpURL.split(\"index.php/\")[1] +\n        \"/PHPSESSID/\" +\n        window.localStorage.getItem(\"PHPSESSID\");\n      // 判断是否领取成功\n      get(apiUrl).then(res => {\n        if (res.code == 0) {\n          Toast(res.error);\n        } else {\n          Toast.success(\"领取优惠劵成功\");\n          apiUrl =\n            res.url.split(\"index.php/\")[1] +\n            \"/PHPSESSID/\" +\n            window.localStorage.getItem(\"PHPSESSID\");\n         this.$router.push({ name: \"coupon_show\", params: { str: apiUrl } });\n        }\n      });\n    }\n  },\n\n  created() {\n    let id = this.$route.params.id;\n    console.log(\"id为\", id);\n    post(\"coupon/api/index\", {\n      PHPSESSID: window.localStorage.getItem(\"PHPSESSID\"),\n      id: id\n    }).then(res => {\n      this.data = res;\n      this.info = res.info;\n      // 已经领取过了,返回的接口是带show\n      if (res.url) {\n        let apiUrl =\n          res.url.split(\"index.php/\")[1] +\n          \"/PHPSESSID/\" +\n          window.localStorage.getItem(\"PHPSESSID\");\n        this.$router.push({ name: \"coupon_show\", params: { str: apiUrl } });\n      }\n    });\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.coupon-get {\n  margin-top: 45px;\n  margin-bottom: 45px;\n  background: #fff;\n  /deep/ ._v-container > ._v-content {padding-bottom: 90px;}\n  .coupon-img {\n    height: 200px;\n    width: 100%;\n  }\n  .coupon-not {\n    padding-top: 1px;\n  }\n}\n.page-block {\n  padding: 15px;\n  margin-top: 50px;\n}\n.page-tt {\n  margin-bottom: 15px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@1.2.0@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.4@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3e10c655&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3e10c655&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e10c655\",\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3e10c655&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=3e10c655&lang=scss&scoped=true&\""],"sourceRoot":""}